(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-269d3e21"],{"6f30":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-container",[s("v-row",{staticClass:"py-0"},[s("v-spacer"),s("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"4"}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{label:"選擇檢核日期"},model:{value:t.checkDate,callback:function(e){t.checkDate=e},expression:"checkDate"}},a))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[s("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"zh-TW"},on:{input:function(e){t.menu2=!1}},model:{value:t.checkDate,callback:function(e){t.checkDate=e},expression:"checkDate"}})],1)],1),s("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[s("v-btn",{attrs:{color:"orange"},on:{click:t.checkDatehandle}},[t._v("檢核")])],1),s("v-col",{attrs:{cols:"12"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.loading,expression:"this.$store.state.loading"}],attrs:{src:a("cf1c"),height:"40px"}}),s("v-tree",{ref:"tree1",attrs:{data:t.treeData,tpl:t.tpl}})],1),s("v-spacer")],1)],1),s("v-container",[s("v-row",[s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-right-transition"},model:{value:t.workDetailDialog,callback:function(e){t.workDetailDialog=e},expression:"workDetailDialog"}},[s("v-toolbar",{attrs:{dark:"",color:"primary"}},[s("v-btn",{staticClass:"px-0",attrs:{dark:"",text:""},on:{click:function(e){t.workDetailDialog=!1}}},[s("v-icon",[t._v("mdi-backspace")]),s("span",{staticClass:"title"},[t._v("退回")])],1),s("v-spacer")],1),s("v-card",{staticClass:"mx-auto",attrs:{tile:""}},[s("v-card-text",{staticClass:"px-3"},[s("workdetailReadonly",{attrs:{propData:t.todo}})],1)],1)],1)],1)],1)],1)},o=[],r=(a("a4d3"),a("99af"),a("4de4"),a("d81d"),a("4e827"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"mx-auto blue lighten-5",attrs:{"max-width":"550",align:"left",outlined:""}},[a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"subtitle-1 mb-1",domProps:{innerHTML:t._s(t.propData.ptitle)}})]),a("v-col",{attrs:{cols:"12"}},[t._v(" 開始日期： "),a("span",{staticClass:"body-1 blue--text",domProps:{innerHTML:t._s(t.propData.t_startdate)}})]),a("v-col",{staticClass:"mb-2",attrs:{cols:"12"}},[t._v(" 完成日期： "),a("span",{staticClass:"body-1 blue--text mb-1",domProps:{innerHTML:t._s(t.propData.t_enddate)}})]),a("v-col",{attrs:{cols:"12"}},[t._v(" 負責單位： "),a("span",{staticClass:"body-1",domProps:{innerHTML:t._s(t.propData.depart)}})]),a("v-col",{attrs:{cols:"12"}},[t._v(" 剩餘天數： "),a("span",{staticClass:"body-1 blue--text",domProps:{innerHTML:t._s(t.propData.remaindays)}})]),a("v-col",{attrs:{cols:"12"}},[t._v(" 狀態： "),a("span",{staticClass:"body-1",domProps:{innerHTML:t._s(t.propData.status)}})]),a("v-col",{attrs:{cols:"12"}},[a("span",{staticClass:"body-2",domProps:{innerHTML:t._s(t.propData.memo)}})])],1)],1),a("v-card-actions")],1),a("v-card",{staticClass:"mx-auto lighten-5",staticStyle:{"border-width":"0px"},attrs:{"max-width":"550",align:"left",outlined:"",tile:""}},[a("v-card-text",{staticClass:"px-0"},[a("div",[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("填報日期")]),a("th",{staticClass:"text-left"},[t._v("進度說明")]),a("th",{staticClass:"text-left"},[t._v("佐證資料")])])]),a("tbody",t._l(t.propData.process,(function(e,s){return a("tr",[a("td",{staticClass:"text-left px-0"},[t._v(t._s(e.t_pgdate))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.pgdesc))]),e.pdf?a("td",{staticClass:"text-center"},[a("span",{staticClass:"blue--text",on:{click:function(a){return t.openPDF(""+e.cfmpic)}}},[t._v("檢視")])]):a("td",{directives:[{name:"viewer",rawName:"v-viewer",value:{inline:!1,button:!0,navbar:!1,title:!0,toolbar:!1,tooltip:!1,movable:!1,zoomable:!0,rotatable:!1,scalable:!1,transition:!1,fullscreen:!0,keyboard:!0,url:"data-source"},expression:"{'inline': false, 'button': true, 'navbar': false, 'title': true, 'toolbar': false, 'tooltip': false, 'movable': false, 'zoomable': true, 'rotatable': false, 'scalable': false, 'transition': false, 'fullscreen': true, 'keyboard': true, 'url': 'data-source' }"}],domProps:{innerHTML:t._s("<img src='"+e.cfmpic+"' style='height:80px;width:80px'>")}})])})),0)]},proxy:!0}])})],1)]),a("v-card-actions")],1),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.PDFdialog,callback:function(e){t.PDFdialog=e},expression:"PDFdialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{staticClass:"px-0",attrs:{dark:"",text:""},on:{click:function(e){t.PDFdialog=!1}}},[a("v-icon",[t._v("mdi-backspace")]),a("span",{staticClass:"title"},[t._v("關閉")])],1)],1),a("v-card-text",{staticClass:"px-0"},[a("iframe",{ref:"PDFiframe",attrs:{id:"PDFiframe",src:t.PDFURL,width:"100%",height:"1500px",frameborder:"0"}})])],1)],1)],1)},i=[],c=a("9138"),l=a("6fa2"),d=a("c1df"),p=a.n(d),u={name:"workdetailReadonly",props:["propData"],data:function(){return{detailEditDialog:!1,editWorkItemDetailData:{},tempDetailData:{},ProcessAddDialog:!1,ProcessAddData:{},tempProcessAddData:{},tempIndex:-1,addProcess:!0,ProcessNodeId:"",ProcessItemIndex:-1,newProcess:{cfmpic:"",pgdate:new Date(p()()),pgdesc:"",pickey:"",t_pgdate:p()().format("YYYY-MM-DD")},PDFdialog:!1,PDFURL:"",iframeHeight:"1000 px"}},components:{},created:function(){},mounted:function(){},watch:{},computed:{},methods:{openPDF:function(t){this.setiframe("PDFiframe"),this.PDFURL=t,this.PDFdialog=!0},setiframe:function(t){var e=this.$refs.PDFiframe,a=Math.max(document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight);e&&(e.height=a+"px")}}},f=u,m=a("2877"),v=a("6544"),D=a.n(v),h=a("8336"),b=a("b0af"),g=a("99d9"),x=a("62ad"),_=a("169a"),k=a("132d"),y=a("0fd9"),w=a("1f4f"),P=a("71d9"),C=Object(m["a"])(f,n,i,!1,null,null,null),V=C.exports;function M(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}D()(C,{VBtn:h["a"],VCard:b["a"],VCardActions:g["b"],VCardText:g["d"],VCol:x["a"],VDialog:_["a"],VIcon:k["a"],VRow:y["a"],VSimpleTable:w["a"],VToolbar:P["a"]});var Y={name:"",data:function(){return{workDetailDialog:!1,treeData:[],db_data:[],todo:{},checkDate:p()().format("YYYY-MM-DD"),menu2:!1}},components:{workdetailReadonly:V},created:function(){},mounted:function(){this.readData()},watch:{},computed:{},methods:{readData:function(){var t=this;this.$store.commit("setLoading",!0),this.db_data=[],c["d"].collection(c["a"]).get().then((function(e){e.forEach((function(e){t.db_data.push(e.data())}))})).then((function(){t.handleData(t.db_data)}))},handleData:function(t){var e=this,a=t.map((function(t){return e.handleNodeData(t)}));this.treeData=l["a"].arrayToJson(a),this.$store.commit("setLoading",!1)},handleNodeData:function(t){t.t_title?t.title=t.t_title:t.t_title=t.title,t.expanded=!0,t.enddate&&(t.t_enddate=p()(t.enddate.toDate()).format("YYYY-MM-DD")),t.startdate&&(t.t_startdate=p()(t.startdate.toDate()).format("YYYY-MM-DD")),t.process&&(t.process.forEach((function(t){t.t_pgdate=p()(t.pgdate.toDate()).format("YYYY-MM-DD")||""})),t.process.sort((function(t,e){return p()(e.t_pgdate).diff(p()(t.t_pgdate))})));var e="";return p()(t.t_startdate)<p()(this.checkDate)&&"完成"!=t.status?(e=p()(t.t_enddate).diff(p()(this.checkDate),"day"),t.remaindays='<span class="red--text">'.concat(e,"天</span>")):t.remaindays="","完成"==t.status&&(t.title="<span class='green--text'>"+t.title+"</span>"),"不顯示"==t.status||"停止"==t.status?{}:(e<=0&&""!==e&&(t.title='<span class="red--text">'.concat(t.title,'</span>\n                                <span class="deep-purple--text">(期限:').concat(t.t_enddate,")</span >")),(p()(this.checkDate).isBefore(t.t_startdate)||""==t.t_startdate)&&(t.title="<span class='grey--text'>"+t.title+"</span>"),t.ptitle=t.title,t)},tpl:function(){for(var t=this,e=this.$createElement,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var r=s[0],n=s[1],i=s[2],c=(s[3],r.selected?"node-title node-selected":"node-title");return r.searched&&(c+=" node-searched"),e("span",[e("span",{class:c,domProps:{innerHTML:r.title},on:{click:function(){var e;n.parent.nodeSelected(n.props.node),e=null===i?t.$store.getters.projectEndDate:i.enddate||t.$store.getters.projectEndDate,t.todo=O({parentEndDate:e},r),t.workDetailDialog=!0}}})])},checkDatehandle:function(){this.handleData(this.db_data)}}},T=Y,j=a("a523"),F=a("2e4b"),E=a("e449"),L=a("2fa4"),H=a("8654"),$=Object(m["a"])(T,s,o,!1,null,null,null);e["default"]=$.exports;D()($,{VBtn:h["a"],VCard:b["a"],VCardText:g["d"],VCol:x["a"],VContainer:j["a"],VDatePicker:F["a"],VDialog:_["a"],VIcon:k["a"],VMenu:E["a"],VRow:y["a"],VSpacer:L["a"],VTextField:H["a"],VToolbar:P["a"]})},cf1c:function(t,e,a){t.exports=a.p+"img/loading.gif"}}]);